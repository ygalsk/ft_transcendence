<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ† Tournament Lobby</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module" src="/src/tournament.ts"></script>
</head>
<body class="bg-slate-900 text-slate-100 font-mono p-6">
  <h1 class="text-3xl font-bold text-cyan-400 text-center mb-6">ğŸ† Tournament Lobby</h1>

  <div id="login_warning" class="hidden bg-red-700 p-3 rounded text-center mb-6">
    âš ï¸ You must be logged in to access tournaments.
  </div>

  <div id="main_ui" class="hidden space-y-6 max-w-5xl mx-auto">

    <!-- Search / Refresh -->
    <div class="bg-slate-800 p-4 rounded shadow flex items-center gap-3 flex-wrap">
      <label for="search_name" class="text-sm text-slate-300">Search tournaments:</label>
      <input id="search_name" type="text" placeholder="Name contains..." class="flex-1 p-2 text-black rounded min-w-[200px]" />
      <button id="btn_refresh_open" class="bg-cyan-500 px-3 py-2 rounded hover:bg-cyan-600">Open</button>
      <button id="btn_load_finished" class="text-sm bg-slate-700 px-3 py-2 rounded hover:bg-slate-600">Finished</button>
    </div>

    <!-- Open tournaments -->
    <div class="bg-slate-800 p-4 rounded shadow">
        <div class="flex items-center justify-between mb-3">
          <h2 id="open_list_heading" class="text-lg text-emerald-300 font-semibold">Open / Active Tournaments</h2>
        </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead id="open_list_head" class="text-slate-300">
          </thead>
          <tbody id="open_list" class="divide-y divide-slate-700">
            <!-- rows injected -->
          </tbody>
        </table>
      </div>
      <div id="open_list_result" class="text-xs text-slate-400 mt-2"></div>
    </div>

    <!-- Selected tournament actions -->
    <div class="grid md:grid-cols-2 gap-4">
      <div class="bg-slate-800 p-4 rounded shadow space-y-2">
        <div class="flex items-center justify-between">
          <h2 class="text-lg text-cyan-300 font-semibold">Selected Tournament</h2>
          <span id="selected_badge" class="text-xs bg-slate-700 px-2 py-1 rounded">None</span>
        </div>
        <div id="selected_info" class="text-sm text-slate-200">No tournament selected.</div>
        <div class="bg-slate-900 border border-slate-700 rounded p-2 text-xs">
          <div class="font-semibold text-slate-100 mb-1">Your next match</div>
          <div id="next_match_info" class="text-slate-300">Select a tournament and click "Go to match".</div>
        </div>
        <div class="flex gap-2 flex-wrap">
          <button id="btn_go_match" class="bg-pink-500 px-3 py-2 rounded hover:bg-pink-600 text-sm">Go to match</button>
          <button id="btn_view_bracket" class="bg-purple-500 px-3 py-2 rounded hover:bg-purple-600 text-sm">View current round</button>
          <button id="btn_view_leaderboard" class="bg-amber-500 px-3 py-2 rounded hover:bg-amber-600 text-sm">Leaderboard</button>
          <button id="btn_start_tournament" class="bg-yellow-500 px-3 py-2 rounded hover:bg-yellow-600 text-sm">Start (creator only)</button>
        </div>
        <pre id="selected_result" class="bg-slate-700 p-2 rounded h-20 overflow-y-auto text-xs"></pre>
      </div>

      <div class="bg-slate-800 p-4 rounded shadow space-y-3">
        <h2 class="text-lg text-emerald-300 font-semibold">Create Tournament</h2>
        <input id="create_name" type="text" placeholder="Tournament name..." class="w-full p-2 text-black rounded" />
        <input id="create_max_players" type="number" placeholder="Max players (2, 4, 8, ...)" class="w-full p-2 text-black rounded" />
        <button id="btn_create_tournament" class="w-full bg-emerald-500 py-2 rounded hover:bg-emerald-600">Create</button>
        <pre id="create_result" class="bg-slate-700 p-2 rounded h-20 overflow-y-auto text-xs"></pre>
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-4">
      <div class="bg-slate-800 p-4 rounded shadow">
        <h3 class="text-sm text-purple-200 mb-2">Bracket (current round)</h3>
        <div id="bracket_table" class="text-xs text-slate-200 space-y-1 h-48 overflow-y-auto bg-slate-700 p-2 rounded"></div>
      </div>
      <div class="bg-slate-800 p-4 rounded shadow">
        <h3 class="text-sm text-amber-200 mb-2">Leaderboard</h3>
        <pre id="leaderboard_result" class="bg-slate-700 p-2 rounded h-48 overflow-y-auto text-xs"></pre>
      </div>
    </div>

    <div class="bg-slate-800 p-4 rounded shadow">
      <h3 class="text-sm text-green-200 mb-2">Final Results</h3>
      <div id="final_results" class="text-xs text-slate-200 h-28 overflow-y-auto bg-slate-700 p-2 rounded">
        Tournament not finished yet.
      </div>
    </div>

  </div>
</body>
</html>
